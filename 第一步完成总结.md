# ç¬¬ä¸€æ­¥å®Œæˆæ€»ç»“ï¼šè®¾å¤‡æ ‘åŸºç¡€ç»“æ„å·²åˆ›å»º

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ç›®å½•ç»“æ„
```
device/lenovo/kirby/
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ wifi/
â”‚       â”œâ”€â”€ p2p_supplicant_overlay.conf
â”‚       â””â”€â”€ wpa_supplicant_overlay.conf
â”œâ”€â”€ init/
â”œâ”€â”€ keylayout/
â”‚   â””â”€â”€ gpio-keys.kl
â”œâ”€â”€ overlay/
â”œâ”€â”€ parts/
â”œâ”€â”€ rootdir/
â”‚   â”œâ”€â”€ etc/
â”‚   â”‚   â””â”€â”€ fstab.qcom
â”‚   â”œâ”€â”€ init.kirby.rc
â”‚   â””â”€â”€ init.target.rc
â”œâ”€â”€ sepolicy/
â”‚   â””â”€â”€ private/
â”œâ”€â”€ AndroidProducts.mk          âœ…
â”œâ”€â”€ BoardConfig.mk               âœ…
â”œâ”€â”€ board-info.txt              âœ…
â”œâ”€â”€ device.mk                    âœ…
â”œâ”€â”€ extract-files.py             âœ…
â”œâ”€â”€ lineage_kirby.mk             âœ…
â”œâ”€â”€ manifest.xml                 âœ…
â”œâ”€â”€ proprietary-files.txt        âœ…
â”œâ”€â”€ system.prop                  âœ…
â””â”€â”€ vendor.prop                  âœ…
```

### 2. æ ¸å¿ƒé…ç½®æ–‡ä»¶

#### âœ… AndroidProducts.mk
- å®šä¹‰äº†äº§å“å˜ä½“åˆ—è¡¨
- åŒ…å« userã€userdebugã€eng ä¸‰ç§æ„å»ºç±»å‹

#### âœ… lineage_kirby.mk
- äº§å“åç§°å’Œå“ç‰Œé…ç½®
- ç»§æ‰¿å…³ç³»å®šä¹‰
- æ„å»ºæŒ‡çº¹é…ç½®

#### âœ… BoardConfig.mkï¼ˆæœ€å…³é”®ï¼‰
- å¹³å°é…ç½®ï¼šSM8650 (pineapple)
- æ¶æ„é…ç½®ï¼šarm64/arm
- å†…æ ¸é…ç½®ï¼š
  - å†…æ ¸è·¯å¾„ï¼š`kernel/lenovo/kirby`
  - å†…æ ¸é…ç½®ï¼š`kirby_defconfig`
  - Boot header version: 4
  - Base address: 0x80000000
  - Page size: 4096
- åˆ†åŒºé…ç½®ï¼š
  - Boot: 100MB
  - Recovery: 100MB
  - System/Vendor/Product ç­‰åŠ¨æ€åˆ†åŒº
- æ–‡ä»¶ç³»ç»Ÿç±»å‹é…ç½®
- AVB (Android Verified Boot) é…ç½®

#### âœ… device.mk
- HAL æœåŠ¡é…ç½®
- ç¡¬ä»¶ç»„ä»¶åŒ…å®šä¹‰
- ä¸“æœ‰æ–‡ä»¶ç»§æ‰¿
- WiFiã€è“ç‰™ã€éŸ³é¢‘ç­‰é…ç½®

### 3. æ”¯æŒæ–‡ä»¶

#### âœ… extract-files.py
- ç”¨äºä»è®¾å¤‡æå–ä¸“æœ‰æ–‡ä»¶çš„è„šæœ¬

#### âœ… proprietary-files.txt
- ä¸“æœ‰æ–‡ä»¶åˆ—è¡¨æ¨¡æ¿
- éœ€è¦ä»å®é™…è®¾å¤‡ä¸­æå–åå®Œå–„

#### âœ… system.prop & vendor.prop
- ç³»ç»Ÿå±æ€§é…ç½®
- éŸ³é¢‘ã€æ˜¾ç¤ºã€æ€§èƒ½ç­‰å‚æ•°

#### âœ… manifest.xml
- HAL (Hardware Abstraction Layer) æ¸…å•
- å®šä¹‰ç¡¬ä»¶æœåŠ¡æ¥å£

#### âœ… fstab.qcom
- æ–‡ä»¶ç³»ç»ŸæŒ‚è½½è¡¨
- åˆ†åŒºæŒ‚è½½é…ç½®

#### âœ… init è„šæœ¬
- init.kirby.rcï¼šè®¾å¤‡ç‰¹å®šåˆå§‹åŒ–
- init.target.rcï¼šç›®æ ‡å¹³å°åˆå§‹åŒ–

#### âœ… WiFi é…ç½®
- wpa_supplicant é…ç½®
- p2p_supplicant é…ç½®

#### âœ… æŒ‰é”®å¸ƒå±€
- gpio-keys.klï¼šç‰©ç†æŒ‰é”®æ˜ å°„

---

## ğŸ“‹ ä¸‹ä¸€æ­¥éœ€è¦åšçš„äº‹æƒ…

### 1. å†…æ ¸é›†æˆ
- [ ] å°†å†…æ ¸æºç é“¾æ¥æˆ–å¤åˆ¶åˆ° `kernel/lenovo/kirby/`
- [ ] ç¡®è®¤å†…æ ¸é…ç½®æ–‡ä»¶åï¼ˆkirby_defconfigï¼‰
- [ ] é…ç½®å†…æ ¸æ„å»ºå‚æ•°

### 2. è·å–ç¡¬ä»¶ä¿¡æ¯
- [ ] åˆ†åŒºå¸ƒå±€ï¼ˆé€šè¿‡ `fastboot getvar all`ï¼‰
- [ ] å®é™…åˆ†åŒºå¤§å°ï¼ˆå¯èƒ½éœ€è¦è°ƒæ•´ BoardConfig.mkï¼‰
- [ ] æ˜¾ç¤ºåˆ†è¾¨ç‡ã€DPI
- [ ] ä¼ æ„Ÿå™¨åˆ—è¡¨
- [ ] éŸ³é¢‘é…ç½®

### 3. æå–ä¸“æœ‰æ–‡ä»¶
- [ ] ä»è¿è¡Œå®˜æ–¹å›ºä»¶çš„è®¾å¤‡ä¸­æå–
- [ ] æˆ–ä»å®˜æ–¹å›ºä»¶åŒ…ä¸­æå–
- [ ] æ›´æ–° proprietary-files.txt
- [ ] åˆ›å»º vendor/lenovo/kirby/ ç›®å½•ç»“æ„

### 4. SELinux ç­–ç•¥
- [ ] åˆ›å»ºå¿…è¦çš„ SELinux ç­–ç•¥æ–‡ä»¶
- [ ] é…ç½®è®¾å¤‡ç‰¹å®šçš„æƒé™

### 5. è®¾å¤‡ç‰¹å®š HAL
- [ ] æŒ‡çº¹è¯†åˆ«ï¼ˆå¦‚æœæ”¯æŒï¼‰
- [ ] ä¼ æ„Ÿå™¨é…ç½®
- [ ] ç›¸æœºé…ç½®
- [ ] å…¶ä»–ç¡¬ä»¶ç‰¹å®šé…ç½®

### 6. æµ‹è¯•æ„å»º
- [ ] å°è¯•é¦–æ¬¡æ„å»º
- [ ] ä¿®å¤æ„å»ºé”™è¯¯
- [ ] è°ƒæ•´é…ç½®

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. **åˆ†åŒºå¤§å°**ï¼šBoardConfig.mk ä¸­çš„åˆ†åŒºå¤§å°æ˜¯ä¼°ç®—å€¼ï¼Œéœ€è¦æ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´
2. **ä¸“æœ‰æ–‡ä»¶**ï¼šproprietary-files.txt æ˜¯æ¨¡æ¿ï¼Œéœ€è¦ä»å®é™…è®¾å¤‡æå–
3. **å†…æ ¸è·¯å¾„**ï¼šç¡®ä¿å†…æ ¸æºç åœ¨æ­£ç¡®çš„ä½ç½®
4. **å¹³å°åç§°**ï¼šå·²è®¾ç½®ä¸º "pineapple"ï¼ˆSM8650ï¼‰ï¼Œå¦‚æœä¸å¯¹éœ€è¦è°ƒæ•´
5. **æ„å»ºæŒ‡çº¹**ï¼šlineage_kirby.mk ä¸­çš„æ„å»ºæŒ‡çº¹éœ€è¦ä»å®é™…è®¾å¤‡è·å–

---

## ğŸ“š å‚è€ƒèµ„æº

- [asphalt è®¾å¤‡æ ‘](https://github.com/lolipuru/android_device_lenovo_asphalt/) - Y700 (8gen2)
- [caihong æ„å»ºæŒ‡å—](https://wiki.lineageos.org/devices/caihong/build/variant1/) - OnePlus Pad Pro (8gen3)
- [LineageOS Wiki](https://wiki.lineageos.org/)

---

## ğŸ¯ å½“å‰çŠ¶æ€

**ç¬¬ä¸€æ­¥å·²å®Œæˆï¼** âœ…

è®¾å¤‡æ ‘çš„åŸºç¡€ç»“æ„å·²ç»åˆ›å»ºï¼Œæ ¸å¿ƒé…ç½®æ–‡ä»¶å·²å°±ä½ã€‚ç°åœ¨å¯ä»¥å¼€å§‹ï¼š
1. é›†æˆå†…æ ¸æºç 
2. æ”¶é›†ç¡¬ä»¶ä¿¡æ¯
3. æå–ä¸“æœ‰æ–‡ä»¶
4. è¿›è¡Œé¦–æ¬¡æ„å»ºæµ‹è¯•

