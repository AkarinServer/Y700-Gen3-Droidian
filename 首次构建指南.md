# LineageOS é¦–æ¬¡æ„å»ºæŒ‡å— - TB321FU (kirby)

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. æ£€æŸ¥æ„å»ºç¯å¢ƒ

#### å¿…éœ€çš„è½¯ä»¶åŒ…
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install bc bison build-essential ccache curl flex g++-multilib gcc-multilib git gnupg gperf imagemagick lib32ncurses5-dev lib32readline-dev lib32z1-dev liblz4-tool libncurses5 libncurses5-dev libsdl1.2-dev libssl-dev libxml2 libxml2-utils lzop pngcrush rsync schedtool squashfs-tools xsltproc zip zlib1g-dev

# Python 3
sudo apt-get install python3 python3-pip

# Repo å·¥å…·
mkdir -p ~/bin
curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
chmod a+x ~/bin/repo
echo 'export PATH=~/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

### 2. åˆå§‹åŒ– LineageOS æºç 

#### æ­¥éª¤ 1: åˆ›å»ºå·¥ä½œç›®å½•
```bash
cd ~
mkdir -p lineageos
cd lineageos
```

#### æ­¥éª¤ 2: åˆå§‹åŒ– Repo
```bash
repo init -u https://github.com/LineageOS/android.git -b lineage-21.0
```

#### æ­¥éª¤ 3: åŒæ­¥æºç ï¼ˆé¦–æ¬¡åŒæ­¥éœ€è¦å¾ˆé•¿æ—¶é—´ï¼‰
```bash
repo sync -c -j$(nproc --all)
```

#### æ­¥éª¤ 4: å¤åˆ¶è®¾å¤‡æ ‘
```bash
# ä»å½“å‰å·¥ä½œç›®å½•å¤åˆ¶è®¾å¤‡æ ‘
cp -r ~/Y700-Gen3-Droidian/device/lenovo/kirby lineageos/device/lenovo/

# å¤åˆ¶å†…æ ¸
cp -r ~/Y700-Gen3-Droidian/kernel/lenovo/kirby lineageos/kernel/lenovo/

# å¤åˆ¶ä¸“æœ‰æ–‡ä»¶
cp -r ~/Y700-Gen3-Droidian/vendor/lenovo/kirby lineageos/vendor/lenovo/
```

---

## ğŸ”¨ æ„å»ºæ­¥éª¤

### 1. è®¾ç½®æ„å»ºç¯å¢ƒ
```bash
cd ~/lineageos
source build/envsetup.sh
```

### 2. é€‰æ‹©è®¾å¤‡
```bash
breakfast kirby
```

### 3. å¼€å§‹æ„å»º
```bash
# ä½¿ç”¨æ‰€æœ‰ CPU æ ¸å¿ƒæ„å»º
brunch kirby

# æˆ–è€…ä½¿ç”¨æŒ‡å®šæ•°é‡çš„å¹¶è¡Œä»»åŠ¡
brunch kirby -j$(nproc --all)
```

---

## âš ï¸ é¢„æœŸé—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. ç¼ºå°‘ä¾èµ–
å¦‚æœæ„å»ºå¤±è´¥æç¤ºç¼ºå°‘ä¾èµ–ï¼Œå®‰è£…å¯¹åº”çš„åŒ…ï¼š
```bash
sudo apt-get install [ç¼ºå¤±çš„åŒ…å]
```

### 2. ä¸“æœ‰æ–‡ä»¶è·¯å¾„é—®é¢˜
å¦‚æœæç¤ºæ‰¾ä¸åˆ°ä¸“æœ‰æ–‡ä»¶ï¼Œæ£€æŸ¥ï¼š
```bash
ls -la vendor/lenovo/kirby/
```

### 3. å†…æ ¸è·¯å¾„é—®é¢˜
å¦‚æœå†…æ ¸æ„å»ºå¤±è´¥ï¼Œæ£€æŸ¥ BoardConfig.mkï¼š
```makefile
TARGET_KERNEL_SOURCE := kernel/lenovo/kirby/kernel
TARGET_KERNEL_CONFIG := kirby_defconfig
```

### 4. å†…å­˜ä¸è¶³
å¦‚æœå†…å­˜ä¸è¶³ï¼ˆè‡³å°‘éœ€è¦ 16GB RAMï¼‰ï¼š
```bash
# å‡å°‘å¹¶è¡Œä»»åŠ¡æ•°
brunch kirby -j4
```

---

## ğŸ“ æ„å»ºåæ–‡ä»¶ä½ç½®

æ„å»ºå®Œæˆåï¼ŒROM æ–‡ä»¶ä½ç½®ï¼š
```
out/target/product/kirby/
â”œâ”€â”€ lineage-21.0-*.zip          # åˆ·æœºåŒ…
â”œâ”€â”€ boot.img                     # Boot é•œåƒ
â”œâ”€â”€ recovery.img                 # Recovery é•œåƒ
â””â”€â”€ ...
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹è„šæœ¬

åˆ›å»º `~/lineageos/setup-kirby.sh`:
```bash
#!/bin/bash

# è®¾ç½®ç¯å¢ƒ
source build/envsetup.sh

# é€‰æ‹©è®¾å¤‡
breakfast kirby

# å¼€å§‹æ„å»º
brunch kirby -j$(nproc --all)
```

ä½¿ç”¨æ–¹æ³•ï¼š
```bash
chmod +x ~/lineageos/setup-kirby.sh
cd ~/lineageos
./setup-kirby.sh
```

